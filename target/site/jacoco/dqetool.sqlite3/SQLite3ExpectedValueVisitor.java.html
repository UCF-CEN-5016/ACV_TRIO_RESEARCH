<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SQLite3ExpectedValueVisitor.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">dqetool</a> &gt; <a href="index.source.html" class="el_package">dqetool.sqlite3</a> &gt; <span class="el_source">SQLite3ExpectedValueVisitor.java</span></div><h1>SQLite3ExpectedValueVisitor.java</h1><pre class="source lang-java linenums">package dqetool.sqlite3;

import dqetool.sqlite3.ast.SQLite3Aggregate;
import dqetool.sqlite3.ast.SQLite3Case.CasePair;
import dqetool.sqlite3.ast.SQLite3Case.SQLite3CaseWithBaseExpression;
import dqetool.sqlite3.ast.SQLite3Case.SQLite3CaseWithoutBaseExpression;
import dqetool.sqlite3.ast.SQLite3Constant;
import dqetool.sqlite3.ast.SQLite3Expression;
import dqetool.sqlite3.ast.SQLite3Expression.BetweenOperation;
import dqetool.sqlite3.ast.SQLite3Expression.BinaryComparisonOperation;
import dqetool.sqlite3.ast.SQLite3Expression.Cast;
import dqetool.sqlite3.ast.SQLite3Expression.CollateOperation;
import dqetool.sqlite3.ast.SQLite3Expression.Function;
import dqetool.sqlite3.ast.SQLite3Expression.InOperation;
import dqetool.sqlite3.ast.SQLite3Expression.Join;
import dqetool.sqlite3.ast.SQLite3Expression.MatchOperation;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3ColumnName;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3Distinct;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3Exist;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3OrderingTerm;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3PostfixText;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3PostfixUnaryOperation;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3TableReference;
import dqetool.sqlite3.ast.SQLite3Expression.SQLite3Text;
import dqetool.sqlite3.ast.SQLite3Expression.Sqlite3BinaryOperation;
import dqetool.sqlite3.ast.SQLite3Expression.Subquery;
import dqetool.sqlite3.ast.SQLite3Expression.TypeLiteral;
import dqetool.sqlite3.ast.SQLite3Function;
import dqetool.sqlite3.ast.SQLite3RowValueExpression;
import dqetool.sqlite3.ast.SQLite3Select;
import dqetool.sqlite3.ast.SQLite3SetClause;
import dqetool.sqlite3.ast.SQLite3UnaryOperation;
import dqetool.sqlite3.ast.SQLite3WindowFunction;
import dqetool.sqlite3.ast.SQLite3WindowFunctionExpression;
import dqetool.sqlite3.ast.SQLite3WindowFunctionExpression.SQLite3WindowFunctionFrameSpecBetween;
import dqetool.sqlite3.ast.SQLite3WindowFunctionExpression.SQLite3WindowFunctionFrameSpecTerm;

<span class="nc" id="L38">public class SQLite3ExpectedValueVisitor implements SQLite3Visitor {</span>

<span class="nc" id="L40">    private final StringBuilder sb = new StringBuilder();</span>
    private int nrTabs;

    private void print(SQLite3Expression expr) {
<span class="nc" id="L44">        SQLite3ToStringVisitor v = new SQLite3ToStringVisitor();</span>
<span class="nc" id="L45">        v.visit(expr);</span>
<span class="nc bnc" id="L46" title="All 2 branches missed.">        for (int i = 0; i &lt; nrTabs; i++) {</span>
<span class="nc" id="L47">            sb.append(&quot;\t&quot;);</span>
        }
<span class="nc" id="L49">        sb.append(v.get());</span>
<span class="nc" id="L50">        sb.append(&quot; -- &quot;);</span>
<span class="nc" id="L51">        sb.append(expr.getExpectedValue());</span>
<span class="nc" id="L52">        sb.append(&quot; explicit collate: &quot;);</span>
<span class="nc" id="L53">        sb.append(expr.getExplicitCollateSequence());</span>
<span class="nc" id="L54">        sb.append(&quot; implicit collate: &quot;);</span>
<span class="nc" id="L55">        sb.append(expr.getImplicitCollateSequence());</span>
<span class="nc" id="L56">        sb.append(&quot;\n&quot;);</span>
<span class="nc" id="L57">    }</span>

    @Override
    public void visit(SQLite3Expression expr) {
<span class="nc" id="L61">        nrTabs++;</span>
<span class="nc" id="L62">        SQLite3Visitor.super.visit(expr);</span>
<span class="nc" id="L63">        nrTabs--;</span>
<span class="nc" id="L64">    }</span>

    @Override
    public void visit(Sqlite3BinaryOperation op) {
<span class="nc" id="L68">        print(op);</span>
<span class="nc" id="L69">        visit(op.getLeft());</span>
<span class="nc" id="L70">        visit(op.getRight());</span>
<span class="nc" id="L71">    }</span>

    @Override
    public void visit(BetweenOperation op) {
<span class="nc" id="L75">        print(op);</span>
<span class="nc" id="L76">        visit(op.getTopNode());</span>
<span class="nc" id="L77">    }</span>

    @Override
    public void visit(SQLite3ColumnName c) {
<span class="nc" id="L81">        print(c);</span>
<span class="nc" id="L82">    }</span>

    @Override
    public void visit(SQLite3Constant c) {
<span class="nc" id="L86">        print(c);</span>
<span class="nc" id="L87">    }</span>

    @Override
    public void visit(Function f) {
<span class="nc" id="L91">        print(f);</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">        for (SQLite3Expression expr : f.getArguments()) {</span>
<span class="nc" id="L93">            visit(expr);</span>
        }
<span class="nc" id="L95">    }</span>

    @Override
    public void visit(SQLite3Select s, boolean inner) {
<span class="nc bnc" id="L99" title="All 2 branches missed.">        for (SQLite3Expression expr : s.getFetchColumns()) {</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">            if (expr instanceof SQLite3Aggregate) {</span>
<span class="nc" id="L101">                visit(expr);</span>
            }
        }
<span class="nc bnc" id="L104" title="All 2 branches missed.">        for (SQLite3Expression expr : s.getJoinClauses()) {</span>
<span class="nc" id="L105">            visit(expr);</span>
        }
<span class="nc" id="L107">        visit(s.getWhereClause());</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">        if (s.getHavingClause() != null) {</span>
<span class="nc" id="L109">            visit(s.getHavingClause());</span>
        }
<span class="nc" id="L111">    }</span>

    @Override
    public void visit(SQLite3OrderingTerm term) {
<span class="nc" id="L115">        sb.append(&quot;(&quot;);</span>
<span class="nc" id="L116">        print(term);</span>
<span class="nc" id="L117">        visit(term.getExpression());</span>
<span class="nc" id="L118">        sb.append(&quot;)&quot;);</span>
<span class="nc" id="L119">    }</span>

    @Override
    public void visit(SQLite3UnaryOperation exp) {
<span class="nc" id="L123">        print(exp);</span>
<span class="nc" id="L124">        visit(exp.getExpression());</span>
<span class="nc" id="L125">    }</span>

    @Override
    public void visit(SQLite3PostfixUnaryOperation exp) {
<span class="nc" id="L129">        print(exp);</span>
<span class="nc" id="L130">        visit(exp.getExpression());</span>
<span class="nc" id="L131">    }</span>

    @Override
    public void visit(CollateOperation op) {
<span class="nc" id="L135">        print(op);</span>
<span class="nc" id="L136">        visit(op.getExpression());</span>
<span class="nc" id="L137">    }</span>

    @Override
    public void visit(Cast cast) {
<span class="nc" id="L141">        print(cast);</span>
<span class="nc" id="L142">        visit(cast.getExpression());</span>
<span class="nc" id="L143">    }</span>

    @Override
    public void visit(TypeLiteral literal) {
<span class="nc" id="L147">    }</span>

    @Override
    public void visit(InOperation op) {
<span class="nc" id="L151">        print(op);</span>
<span class="nc" id="L152">        visit(op.getLeft());</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">        if (op.getRightExpressionList() != null) {</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">            for (SQLite3Expression expr : op.getRightExpressionList()) {</span>
<span class="nc" id="L155">                visit(expr);</span>
            }
<span class="nc" id="L157">        } else {</span>
<span class="nc" id="L158">            visit(op.getRightSelect());</span>
        }
<span class="nc" id="L160">    }</span>

    @Override
    public void visit(Subquery query) {
<span class="nc" id="L164">        print(query);</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">        if (query.getExpectedValue() != null) {</span>
<span class="nc" id="L166">            visit(query.getExpectedValue());</span>
        }
<span class="nc" id="L168">    }</span>

    @Override
    public void visit(SQLite3Exist exist) {
<span class="nc" id="L172">        print(exist);</span>
<span class="nc" id="L173">        visit(exist.getExpression());</span>
<span class="nc" id="L174">    }</span>

    @Override
    public void visit(Join join) {
<span class="nc" id="L178">        print(join);</span>
<span class="nc" id="L179">        visit(join.getOnClause());</span>
<span class="nc" id="L180">    }</span>

    @Override
    public void visit(BinaryComparisonOperation op) {
<span class="nc" id="L184">        print(op);</span>
<span class="nc" id="L185">        visit(op.getLeft());</span>
<span class="nc" id="L186">        visit(op.getRight());</span>
<span class="nc" id="L187">    }</span>

    public String get() {
<span class="nc" id="L190">        return sb.toString();</span>
    }

    @Override
    public void visit(SQLite3Function func) {
<span class="nc" id="L195">        print(func);</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">        for (SQLite3Expression expr : func.getArgs()) {</span>
<span class="nc" id="L197">            visit(expr);</span>
        }
<span class="nc" id="L199">    }</span>

    @Override
    public void visit(SQLite3Distinct distinct) {
<span class="nc" id="L203">        print(distinct);</span>
<span class="nc" id="L204">        visit(distinct.getExpression());</span>
<span class="nc" id="L205">    }</span>

    @Override
    public void visit(SQLite3CaseWithoutBaseExpression caseExpr) {
<span class="nc bnc" id="L209" title="All 2 branches missed.">        for (CasePair cExpr : caseExpr.getPairs()) {</span>
<span class="nc" id="L210">            print(cExpr.getCond());</span>
<span class="nc" id="L211">            visit(cExpr.getCond());</span>
<span class="nc" id="L212">            print(cExpr.getThen());</span>
<span class="nc" id="L213">            visit(cExpr.getThen());</span>
        }
<span class="nc bnc" id="L215" title="All 2 branches missed.">        if (caseExpr.getElseExpr() != null) {</span>
<span class="nc" id="L216">            print(caseExpr.getElseExpr());</span>
<span class="nc" id="L217">            visit(caseExpr.getElseExpr());</span>
        }
<span class="nc" id="L219">    }</span>

    @Override
    public void visit(SQLite3CaseWithBaseExpression caseExpr) {
<span class="nc" id="L223">        print(caseExpr);</span>
<span class="nc" id="L224">        visit(caseExpr.getBaseExpr());</span>
<span class="nc bnc" id="L225" title="All 2 branches missed.">        for (CasePair cExpr : caseExpr.getPairs()) {</span>
<span class="nc" id="L226">            print(cExpr.getCond());</span>
<span class="nc" id="L227">            visit(cExpr.getCond());</span>
<span class="nc" id="L228">            print(cExpr.getThen());</span>
<span class="nc" id="L229">            visit(cExpr.getThen());</span>
        }
<span class="nc bnc" id="L231" title="All 2 branches missed.">        if (caseExpr.getElseExpr() != null) {</span>
<span class="nc" id="L232">            print(caseExpr.getElseExpr());</span>
<span class="nc" id="L233">            visit(caseExpr.getElseExpr());</span>
        }
<span class="nc" id="L235">    }</span>

    @Override
    public void visit(SQLite3Aggregate aggr) {
<span class="nc" id="L239">        print(aggr);</span>
<span class="nc" id="L240">        visit(aggr.getExpectedValue());</span>
<span class="nc" id="L241">    }</span>

    @Override
    public void visit(SQLite3PostfixText op) {
<span class="nc" id="L245">        print(op);</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">        if (op.getExpression() != null) {</span>
<span class="nc" id="L247">            visit(op.getExpression());</span>
        }
<span class="nc" id="L249">    }</span>

    @Override
    public void visit(SQLite3WindowFunction func) {
<span class="nc" id="L253">        print(func);</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">        for (SQLite3Expression expr : func.getArgs()) {</span>
<span class="nc" id="L255">            visit(expr);</span>
        }
<span class="nc" id="L257">    }</span>

    @Override
    public void visit(MatchOperation match) {
<span class="nc" id="L261">        print(match);</span>
<span class="nc" id="L262">        visit(match.getLeft());</span>
<span class="nc" id="L263">        visit(match.getRight());</span>
<span class="nc" id="L264">    }</span>

    @Override
    public void visit(SQLite3RowValueExpression rw) {
<span class="nc" id="L268">        print(rw);</span>
<span class="nc bnc" id="L269" title="All 2 branches missed.">        for (SQLite3Expression expr : rw.getExpressions()) {</span>
<span class="nc" id="L270">            visit(expr);</span>
        }
<span class="nc" id="L272">    }</span>

    @Override
    public void visit(SQLite3Text func) {
<span class="nc" id="L276">        print(func);</span>
<span class="nc" id="L277">    }</span>

    @Override
    public void visit(SQLite3WindowFunctionExpression windowFunction) {

<span class="nc" id="L282">    }</span>

    @Override
    public void visit(SQLite3WindowFunctionFrameSpecTerm term) {

<span class="nc" id="L287">    }</span>

    @Override
    public void visit(SQLite3WindowFunctionFrameSpecBetween between) {

<span class="nc" id="L292">    }</span>

    @Override
    public void visit(SQLite3TableReference tableReference) {

<span class="nc" id="L297">    }</span>

    @Override
    public void visit(SQLite3SetClause set) {
<span class="nc" id="L301">        print(set);</span>
<span class="nc" id="L302">        visit(set.getLeft());</span>
<span class="nc" id="L303">        visit(set.getRight());</span>
<span class="nc" id="L304">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>